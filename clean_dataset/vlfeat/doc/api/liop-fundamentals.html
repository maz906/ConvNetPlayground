<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <!-- Favicon -->
  <link href="../images/vl_blue.ico" type="image/x-icon" rel="icon"></link>
  <link href="../images/vl_blue.ico" type="image/x-icon" rel="shortcut icon"></link>
  <!-- Stylesheets -->
  <link href="../web.css" type="text/css" rel="stylesheet"></link>
  <link href="../pygmentize.css" type="text/css" rel="stylesheet"></link>
  <style xml:space="preserve">
    /* fixes a conflict between Pygmentize and MathJax */
    .MathJax .mo, .MathJax .mi {color: inherit ! important}
  </style>
  <title>VLFeat - Documentation - C API</title>
  <link rel="stylesheet" type="text/css" href="../doxygen.css"></style>
  <!-- Scripts-->
  <script type="text/x-mathjax-config" >
      MathJax.Hub.Config({
      tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      processEscapes: true,
      },
      TeX: {
        Macros: {
          balpha: '\\boldsymbol{\\alpha}',
          bc: '\\mathbf{c}',
          be: '\\mathbf{e}',
          bg: '\\mathbf{g}',
          bq: '\\mathbf{q}',
          bu: '\\mathbf{u}',
          bv: '\\mathbf{v}',
          bw: '\\mathbf{w}',
          bx: '\\mathbf{x}',
          by: '\\mathbf{y}',
          bz: '\\mathbf{z}',
          bsigma: '\\mathbf{\\sigma}',
          sign: '\\operatorname{sign}',
          diag: '\\operatorname{diag}',
          real: '\\mathbb{R}',
        },
        equationNumbers: { autoNumber: 'AMS' }
      }
     });
    </script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!-- Google Custom Search -->
  <script xml:space="preserve">
    (function() {
    var cx = '003215582122030917471:oq23albfeam';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
    '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
    })();
  </script>
  <!-- Google Analytics -->
  <script xml:space="preserve" type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4936091-2']);
    _gaq.push(['_trackPageview']);
    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
 </head>
 <!-- Body Start -->
 <body>
  <div id="header-section">
    <div id="header">
      <!-- Google CSE Search Box -->
      <div id="google" class="gcse-searchbox-only" data-resultsUrl="http://www.vlfeat.org/search.html"></div>
      <h1><a shape="rect" href="../index.html" class="plain"><span id="vlfeat">VLFeat</span><span id="dotorg">.org</span></a></h1>
    </div>
  </div>
  <div id="headbanner-section">
    <div id="headbanner">
      Documentation - C API
    </div>
  </div>
  <div id="content-section">
    <div id="content-wrapper">
      <div id="sidebar"> <!-- Navigation Start -->
        <ul>
<li><a href="../index.html">Home</a>
</li>
<li><a href="../download.html">Download</a>
</li>
<li><a href="../doc.html">Documentation</a>
<ul>
<li><a href="../mdoc/mdoc.html">Matlab API</a>
</li>
<li><a href="index.html" class='active' >C API</a>
</li>
<li><a href="../man/man.html">Man pages</a>
</li>
</ul></li>
<li><a href="../overview/tut.html">Tutorials</a>
</li>
<li><a href="../applications/apps.html">Applications</a>
</li>
</ul>
      </div> <!-- sidebar -->
      <div id="content">
    <link rel="stylesheet" type="text/css" href="../doxygen.css"></style>
    <script type="text/x-mathjax-config" >
      MathJax.Hub.Config({
      tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      processEscapes: true,
      },
      TeX: {
        Macros: {
          balpha: '\\boldsymbol{\\alpha}',
          bc: '\\mathbf{c}',
          be: '\\mathbf{e}',
          bg: '\\mathbf{g}',
          bq: '\\mathbf{q}',
          bu: '\\mathbf{u}',
          bv: '\\mathbf{v}',
          bw: '\\mathbf{w}',
          bx: '\\mathbf{x}',
          by: '\\mathbf{y}',
          bz: '\\mathbf{z}',
          bsigma: '\\mathbf{\\sigma}',
          sign: '\\operatorname{sign}',
          diag: '\\operatorname{diag}',
          real: '\\mathbb{R}',
        },
        equationNumbers: { autoNumber: 'AMS' }
      }
     });
    </script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <div class="doxygen">
<div>
<!-- Generated by Doxygen 1.8.1.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="liop.html">Local Intensity Order Pattern descriptor</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LIOP fundamentals </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#liop-computation">Descriptor computation</a><ul><li class="level2"><a href="#liop-computation-bins">Region division</a></li>
<li class="level2"><a href="#liop-computation-points">Sample point contribution</a></li>
<li class="level2"><a href="#liop-computation-concatenation">Concatenation</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>Local Invariant Order Pattern (LIOP) descriptor, as proposed in <a class="el" href="citelist.html#CITEREF_wang11local">[24]</a> , uses both local and overall intensity information of the local patch for the descriptor computation. It is invariant to monotonic intensity changes and image rotation and is robust to many other geometric and photometric transformations.</p>
<p>The descriptor is computed from a normalized local patch. An image part that belongs to a feature frame which can be generally of shape of an oriented ellise is transformed to a circle.</p>
<p>In this implementation, we are computing the LIOP descriptor from a patch which is represented by a square of an odd side length. Only points belonging to the area of a circle of a radius which is always smaller than half of the patch side will be used as sample points.</p>
<h1><a class="anchor" id="liop-computation"></a>
Descriptor computation</h1>
<p>The descriptor computation has 2 steps based on intensity order. First, every sample point is assigned to a particular bin according to overall intensity. Second, intensities of neighbours of sample points contribute to actuall values of the computed descriptor.</p>
<h2><a class="anchor" id="liop-computation-bins"></a>
Region division</h2>
<p>All sample points are sorted according to their intensity in a nondescending order. The points are than equally quantized into <code>numberOfBins</code> ordinal bins.</p>
<p>As a result, each bin contains the same number of points except for the last one which is between 0 to <code>numberOfBins</code> - 1 points larger. The first bin contains points with the lowest intensity values, similarly the last bin has the points with the highest intensity values.</p>
<p>(parameter to set <code>numberOfBins</code>)</p>
<h2><a class="anchor" id="liop-computation-points"></a>
Sample point contribution</h2>
<p>Each point is represented by its neighbours. Specifically, <code>numberOfNeighbours</code> points are sampled from a circle of radius <code>pointToNeighbourRadius</code> and centre in the particular point. The neighbouring points are sampled in the same manner as shown on the image below ( \(C\) is the patch center). Sampling order is always anticlokwise.</p>
<div class="image">
<img src="liop-neighbours-sampling.png" alt="liop-neighbours-sampling.png"/>
<div class="caption">
Sampling order of neighbouring points</div></div>
<p> Intensity values of these neighbouring points are computed by linear interpolation.</p>
<p>We sort the neighbours according their intensities and take the indexes that points from the sorted array into the unsorted one. Then the permutation index is computed.</p>
<p class="formulaDsp">
\[ [ I( N_{1}) \; I( N_{2} ) \; I(N_{3}) \; I( N_{4}) ] = [ 86 \; 217 \; 152 \; 101]\rightarrow ( 1 \; 4 \; 3 \; 2 )\rightarrow 6 \]
</p>
<p>The permutation index is computed so that it fits the table below.</p>
<table class="doxtable">
<tr>
<th>Array indexes </th><th>Permutation index</th></tr>
<tr>
<td>1 2 3 4 </td><td>0 </td></tr>
<tr>
<td>1 2 4 3 </td><td>1 </td></tr>
<tr>
<td>1 3 2 4 </td><td>2 </td></tr>
<tr>
<td>1 3 4 2 </td><td>3 </td></tr>
<tr>
<td>1 4 2 3 </td><td>4 </td></tr>
<tr>
<td>1 4 3 2 </td><td>5 </td></tr>
<tr>
<td>2 1 3 4 </td><td>6 </td></tr>
<tr>
<td>2 1 4 3 </td><td>7 </td></tr>
<tr>
<td>... </td><td>... </td></tr>
<tr>
<td>4 3 1 2 </td><td>22 </td></tr>
<tr>
<td>4 3 2 1 </td><td>23 </td></tr>
</table>
<p>Each bin forms a factorial() length descriptor. Each point increments the element of the bin descriptor at position of its permutation index. How much the element will be incremented is determined by a weighting function.</p>
<dl class="section user"><dt>Weighting function</dt><dd></dd></dl>
<p>The bigger difference is between intensities of all neighbours of a particular point, the bigger weight is assigned. (In the following equation the \(Th\) stands for <code>weightThreshold</code>.)</p>
<p class="formulaDsp">
\[ w = \sum \limits_{i,j} sgn( | I( N_{i} )- I( N_{j} )| - Th) + 1 \]
</p>
<p>If \(w &gt; 0\) the particular element is increased by w, by 1 otherwise.</p>
<p>(parameters to set <code>numberOfNeighbours</code>, <code>pointToNeighbourRadius</code> and <code>weightThreshold</code>)</p>
<h2><a class="anchor" id="liop-computation-concatenation"></a>
Concatenation</h2>
<p>As the last step, descriptors of all bins are concatenated together. Therefore, the first group of factorial() elements of the descriptor come from the first bin, the second group of factorial() elements represents the second bin ect.</p>
<p>The final step is normalization of the descriptor \(\phi\).</p>
<p class="formulaDsp">
\[ \frac{\phi}{\|\phi\|}\times255 \]
</p>
 </div></div><!-- contents -->
     <!-- Doc Here -->
    </div>
      </div>
      <div class="clear">&nbsp;</div>
    </div>
  </div> <!-- content-section -->
  <div id="footer-section">
    <div id="footer">
      &copy; 2007-13 The authors of VLFeat
    </div> <!-- footer -->
  </div> <!-- footer section -->
 </body>
 <!-- Body ends -->
</html>
